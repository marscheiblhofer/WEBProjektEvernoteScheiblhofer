@if (notelist) {
  <div class="ui segment">
    <div class="ui two column very relaxed grid">
      <div class="column">
        <h1>{{ notelist.name }}</h1>
        <button class="ui tiny red labeled icon button" (click)="removeNotelist()">
          <i class="remove icon"></i>Notizbuch löschen
        </button>
        <a class="ui tiny yellow labeled icon button" [routerLink]="'../../notelist-form/'+ notelist.id">
          <i class="edit icon"></i>Notizbuch bearbeiten
        </a>
        <div class="ui middle aligned selection divided list">
          @for (note of notelist.notes; track note) {
            <a class="item" (click)="showNoteDetails(note.id)">
              {{ note.id }} | {{ note.title }}
            </a>
          }
          <button [routerLink]="'/note-form'" [state]="{notelist:notelist.id}" class="ui tiny red labeled icon button">
            <i class="add icon"></i>Notiz hinzufügen
          </button>
        </div>

      </div>
      <div class="column">
        @if (noteDetailsOn) {
          @if (note) {
            <h1>{{ note.title }}</h1>
            @for (category of note.categories; track category) {
              <div class="ui tag label">
                {{ category.category }}
              </div>
            }
            <p>{{ note.description }}</p>
            <div class="ui small images">
              @for (thumbnail of note.images; track thumbnail) {
                <img [src]="thumbnail.url">
              }
            </div>
            <br>
            <h3 *ngIf="note.todos">Todos</h3>
            @for (todo of note.todos; track todo) {
              <div class="todo-box">
                <p><b>{{ todo.title }}</b></p>
                <p class="todo-small-info" *ngIf="todo.due_date">Fällig bis {{ todo.due_date }}</p>
                <p>{{ todo.description }}</p>
                <div *ngIf="todo.completed" class="todo-checked">
                  <i class="icon checkmark"></i>
                  <span>Erledigt</span>
                </div>
                <div class="todo-notchecked" *ngIf="!todo.completed">
                  <i class="icon close"></i>
                  <span>Nicht erledigt</span>
                </div>
                <a *ngIf="!todo.completed" (click)="todoMarkAsChecked(todo, note.id)" class="ui tiny green labeled icon button">
                  <i class="checkmark icon"></i>Auf erledigt setzen
                </a>
                <i (click)="todoDelete(todo.id, note.id)" class="trash red icon"></i>
            </div>
            }

            <br><br>
            <a class="ui tiny yellow labeled icon button" [routerLink]="'../../todo-form/'"
               [queryParams]="{notelistId: notelist.id, noteId: note.id}">
              <i class="plus icon"></i>Todo erstellen
            </a>

            <br><br>
            <button class="ui tiny red labeled icon button" (click)="removeNote()">
              <i class="remove icon"></i>Notiz löschen
            </button>
            <a class="ui tiny yellow labeled icon button" [routerLink]="'../../note-form/'+ note.id">
              <i class="edit icon"></i>Notiz bearbeiten
            </a>
          }
        }
      </div>
      <div class="sixteen wide column">

      </div>
    </div>
    <div class="ui vertical divider"></div>

  </div>
  <button [routerLink]="'/notelists'" class="ui red button">Zurück zur Liste</button>
}
